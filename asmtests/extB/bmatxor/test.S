# RISC-V Bit Manipulation Instruction Support
#
# Copyright (c) 2019, Imperas Software Ltd. Additions
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are met:
#      * Redistributions of source code must retain the above copyright
#        notice, this list of conditions and the following disclaimer.
#      * Redistributions in binary form must reproduce the above copyright
#        notice, this list of conditions and the following disclaimer in the
#        documentation and/or other materials provided with the distribution.
#      * the name of Imperas Software Ltd. nor the
#        names of its contributors may be used to endorse or promote products
#        derived from this software without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
# IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
# THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
# PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL Codasip Ltd., Imperas Software Ltd.
# BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
# ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
# THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
.include "extB.S.include"

# use s0(r8)  - s1(r9)
# use s2(r18) - s11(r27)

.macro test_BMATXOR imm1 imm2
    WRITE_LOG_N str1
    WRITE_S sep
    li s3, \imm1
    li s4, \imm2
    BMATXOR 18 19 20
    WRITE_RAW s3
    WRITE_S op
    WRITE_RAW s4
    WRITE_S gives
    WRITE_RAW s2
    WRITE_NL
.endm

START_TEST:
#if defined(XLEN64)
    test_BMATXOR 0x0000000000000000 0x0000000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000000
    test_BMATXOR 0x0000000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000001
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000002
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000004
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000008
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000010
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000020
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000040
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000080
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000100
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000200
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000400
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000000800
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000001000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000002000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000004000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000008000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000010000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000020000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000040000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000080000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000100000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000200000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000400000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000000800000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000001000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000002000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000004000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000008000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000010000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000020000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000040000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000080000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000100000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000200000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000400000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000000800000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000001000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000002000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000004000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000008000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000010000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000020000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000040000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000080000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000100000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000200000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000400000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0000800000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0001000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0002000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0004000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0008000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0010000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0020000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0040000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0080000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0100000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0200000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0400000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x0800000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x1000000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x2000000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x4000000000000000
    test_BMATXOR 0xFFFFFFFFFFFFFFFF 0x8000000000000000
    test_BMATXOR 0x0000000000000000 0x0000000000000001
    test_BMATXOR 0x0000000000000000 0x0000000000000002
    test_BMATXOR 0x0000000000000000 0x0000000000000004
    test_BMATXOR 0x0000000000000000 0x0000000000000008
    test_BMATXOR 0x0000000000000000 0x0000000000000010
    test_BMATXOR 0x0000000000000000 0x0000000000000020
    test_BMATXOR 0x0000000000000000 0x0000000000000040
    test_BMATXOR 0x0000000000000000 0x0000000000000080
    test_BMATXOR 0x0000000000000000 0x0000000000000100
    test_BMATXOR 0x0000000000000000 0x0000000000000200
    test_BMATXOR 0x0000000000000000 0x0000000000000400
    test_BMATXOR 0x0000000000000000 0x0000000000000800
    test_BMATXOR 0x0000000000000000 0x0000000000001000
    test_BMATXOR 0x0000000000000000 0x0000000000002000
    test_BMATXOR 0x0000000000000000 0x0000000000004000
    test_BMATXOR 0x0000000000000000 0x0000000000008000
    test_BMATXOR 0x0000000000000000 0x0000000000010000
    test_BMATXOR 0x0000000000000000 0x0000000000020000
    test_BMATXOR 0x0000000000000000 0x0000000000040000
    test_BMATXOR 0x0000000000000000 0x0000000000080000
    test_BMATXOR 0x0000000000000000 0x0000000000100000
    test_BMATXOR 0x0000000000000000 0x0000000000200000
    test_BMATXOR 0x0000000000000000 0x0000000000400000
    test_BMATXOR 0x0000000000000000 0x0000000000800000
    test_BMATXOR 0x0000000000000000 0x0000000001000000
    test_BMATXOR 0x0000000000000000 0x0000000002000000
    test_BMATXOR 0x0000000000000000 0x0000000004000000
    test_BMATXOR 0x0000000000000000 0x0000000008000000
    test_BMATXOR 0x0000000000000000 0x0000000010000000
    test_BMATXOR 0x0000000000000000 0x0000000020000000
    test_BMATXOR 0x0000000000000000 0x0000000040000000
    test_BMATXOR 0x0000000000000000 0x0000000080000000
    test_BMATXOR 0x0000000000000000 0x0000000100000000
    test_BMATXOR 0x0000000000000000 0x0000000200000000
    test_BMATXOR 0x0000000000000000 0x0000000400000000
    test_BMATXOR 0x0000000000000000 0x0000000800000000
    test_BMATXOR 0x0000000000000000 0x0000001000000000
    test_BMATXOR 0x0000000000000000 0x0000002000000000
    test_BMATXOR 0x0000000000000000 0x0000004000000000
    test_BMATXOR 0x0000000000000000 0x0000008000000000
    test_BMATXOR 0x0000000000000000 0x0000010000000000
    test_BMATXOR 0x0000000000000000 0x0000020000000000
    test_BMATXOR 0x0000000000000000 0x0000040000000000
    test_BMATXOR 0x0000000000000000 0x0000080000000000
    test_BMATXOR 0x0000000000000000 0x0000100000000000
    test_BMATXOR 0x0000000000000000 0x0000200000000000
    test_BMATXOR 0x0000000000000000 0x0000400000000000
    test_BMATXOR 0x0000000000000000 0x0000800000000000
    test_BMATXOR 0x0000000000000000 0x0001000000000000
    test_BMATXOR 0x0000000000000000 0x0002000000000000
    test_BMATXOR 0x0000000000000000 0x0004000000000000
    test_BMATXOR 0x0000000000000000 0x0008000000000000
    test_BMATXOR 0x0000000000000000 0x0010000000000000
    test_BMATXOR 0x0000000000000000 0x0020000000000000
    test_BMATXOR 0x0000000000000000 0x0040000000000000
    test_BMATXOR 0x0000000000000000 0x0080000000000000
    test_BMATXOR 0x0000000000000000 0x0100000000000000
    test_BMATXOR 0x0000000000000000 0x0200000000000000
    test_BMATXOR 0x0000000000000000 0x0400000000000000
    test_BMATXOR 0x0000000000000000 0x0800000000000000
    test_BMATXOR 0x0000000000000000 0x1000000000000000
    test_BMATXOR 0x0000000000000000 0x2000000000000000
    test_BMATXOR 0x0000000000000000 0x4000000000000000
    test_BMATXOR 0x0000000000000000 0x8000000000000000
    test_BMATXOR 0x0000000000000001 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000002 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000004 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000008 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000010 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000020 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000040 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000080 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000100 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000200 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000400 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000800 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000001000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000002000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000004000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000008000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000010000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000020000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000040000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000080000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000100000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000200000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000400000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000800000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000001000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000002000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000004000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000008000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000010000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000020000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000040000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000080000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000100000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000200000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000400000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000800000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000001000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000002000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000004000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000008000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000010000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000020000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000040000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000080000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000100000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000200000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000400000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000800000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0001000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0002000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0004000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0008000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0010000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0020000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0040000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0080000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0100000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0200000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0400000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0800000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x1000000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x2000000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x4000000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x8000000000000000 0xFFFFFFFFFFFFFFFF
    test_BMATXOR 0x0000000000000001 0x0000000000000000
    test_BMATXOR 0x0000000000000002 0x0000000000000000
    test_BMATXOR 0x0000000000000004 0x0000000000000000
    test_BMATXOR 0x0000000000000008 0x0000000000000000
    test_BMATXOR 0x0000000000000010 0x0000000000000000
    test_BMATXOR 0x0000000000000020 0x0000000000000000
    test_BMATXOR 0x0000000000000040 0x0000000000000000
    test_BMATXOR 0x0000000000000080 0x0000000000000000
    test_BMATXOR 0x0000000000000100 0x0000000000000000
    test_BMATXOR 0x0000000000000200 0x0000000000000000
    test_BMATXOR 0x0000000000000400 0x0000000000000000
    test_BMATXOR 0x0000000000000800 0x0000000000000000
    test_BMATXOR 0x0000000000001000 0x0000000000000000
    test_BMATXOR 0x0000000000002000 0x0000000000000000
    test_BMATXOR 0x0000000000004000 0x0000000000000000
    test_BMATXOR 0x0000000000008000 0x0000000000000000
    test_BMATXOR 0x0000000000010000 0x0000000000000000
    test_BMATXOR 0x0000000000020000 0x0000000000000000
    test_BMATXOR 0x0000000000040000 0x0000000000000000
    test_BMATXOR 0x0000000000080000 0x0000000000000000
    test_BMATXOR 0x0000000000100000 0x0000000000000000
    test_BMATXOR 0x0000000000200000 0x0000000000000000
    test_BMATXOR 0x0000000000400000 0x0000000000000000
    test_BMATXOR 0x0000000000800000 0x0000000000000000
    test_BMATXOR 0x0000000001000000 0x0000000000000000
    test_BMATXOR 0x0000000002000000 0x0000000000000000
    test_BMATXOR 0x0000000004000000 0x0000000000000000
    test_BMATXOR 0x0000000008000000 0x0000000000000000
    test_BMATXOR 0x0000000010000000 0x0000000000000000
    test_BMATXOR 0x0000000020000000 0x0000000000000000
    test_BMATXOR 0x0000000040000000 0x0000000000000000
    test_BMATXOR 0x0000000080000000 0x0000000000000000
    test_BMATXOR 0x0000000100000000 0x0000000000000000
    test_BMATXOR 0x0000000200000000 0x0000000000000000
    test_BMATXOR 0x0000000400000000 0x0000000000000000
    test_BMATXOR 0x0000000800000000 0x0000000000000000
    test_BMATXOR 0x0000001000000000 0x0000000000000000
    test_BMATXOR 0x0000002000000000 0x0000000000000000
    test_BMATXOR 0x0000004000000000 0x0000000000000000
    test_BMATXOR 0x0000008000000000 0x0000000000000000
    test_BMATXOR 0x0000010000000000 0x0000000000000000
    test_BMATXOR 0x0000020000000000 0x0000000000000000
    test_BMATXOR 0x0000040000000000 0x0000000000000000
    test_BMATXOR 0x0000080000000000 0x0000000000000000
    test_BMATXOR 0x0000100000000000 0x0000000000000000
    test_BMATXOR 0x0000200000000000 0x0000000000000000
    test_BMATXOR 0x0000400000000000 0x0000000000000000
    test_BMATXOR 0x0000800000000000 0x0000000000000000
    test_BMATXOR 0x0001000000000000 0x0000000000000000
    test_BMATXOR 0x0002000000000000 0x0000000000000000
    test_BMATXOR 0x0004000000000000 0x0000000000000000
    test_BMATXOR 0x0008000000000000 0x0000000000000000
    test_BMATXOR 0x0010000000000000 0x0000000000000000
    test_BMATXOR 0x0020000000000000 0x0000000000000000
    test_BMATXOR 0x0040000000000000 0x0000000000000000
    test_BMATXOR 0x0080000000000000 0x0000000000000000
    test_BMATXOR 0x0100000000000000 0x0000000000000000
    test_BMATXOR 0x0200000000000000 0x0000000000000000
    test_BMATXOR 0x0400000000000000 0x0000000000000000
    test_BMATXOR 0x0800000000000000 0x0000000000000000
    test_BMATXOR 0x1000000000000000 0x0000000000000000
    test_BMATXOR 0x2000000000000000 0x0000000000000000
    test_BMATXOR 0x4000000000000000 0x0000000000000000
    test_BMATXOR 0x8000000000000000 0x0000000000000000
#endif

    EXIT_TEST

str1:
    .string "Testing BMATXOR"

sep:
    .string " "

gives:
    .string " => "

op:
    .string " (OP) "
